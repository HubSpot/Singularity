{{#if synced}}
    <div class="row same-size-row-top">
        <div class="col-md-6 same-size-col">
            <a href="{{appRoot}}/requests"><h2>Requests</h2></a>
            <div class="row same-size-row">
                <div class="col-md-4 same-size-col chart-data">
                    {{#each requests}}
                        <div class="datablock" id="{{ type }}" style="height:{{ height }}%" title="{{count}} {{label}}"></div>
                    {{/each}}
                </div>
                <div class="col-md-8 same-size-col">
                    <div class="row same-size-row">
                        <div class="col-md-8 same-size-col">
                            <ul class="list-group" id="legend">
                                {{#each requests}}
                                    <li class="list-group-item">
                                        <span class="badge pull-left" id="{{ type }}">{{ count }}</span>
                                        {{#if link}}
                                            <a href="{{appRoot}}{{ link }}">{{ label }}</a>
                                        {{else}}
                                            {{ label }}
                                        {{/if}}
                                    </li>
                                {{/each}}
                            </ul>
                            <ul class="list-group" id="legend-left">
                                <li class="list-group-item">
                                    <span class="badge">{{state.overProvisionedRequests}}</span>
                                    Over Provisioned
                                </li>
                                <li class="list-group-item" id="legend-left">
                                    <span class="badge">{{state.underProvisionedRequests}}</span>
                                    Under Provisioned
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 same-size-col">
            <a href="{{appRoot}}/tasks"><h2>Tasks</h2></a>
            <div class="row same-size-row">
                <div class="col-md-4 same-size-col chart-data">
                    {{#each tasks}}
                        <div class="datablock" id="{{ type }}" style="height:{{ height }}%" title="{{count}} {{label}}"></div>
                    {{/each}}
                </div>
                <div class="col-md-8 same-size-col">
                    <div class="row same-size-row">
                        <div class="col-md-8 same-size-col">
                            <ul class="list-group" id="legend">
                                {{#each tasks}}
                                    <li class="list-group-item">
                                        <span class="badge pull-left" id="{{ type }}">{{ count }}</span>
                                        {{#if link}}
                                            <a href="{{appRoot}}{{ link }}">{{ label }}</a>
                                        {{else}}
                                            {{ label }}
                                        {{/if}}
                                    </li>
                                {{/each}}
                            </ul>
                            <ul class="list-group" id="legend-left">
                                <li class="list-group-item">
                                    <span class="badge">{{timestampDuration state.maxTaskLag}}</span>
                                    Max Task Lag
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-4">
            <a href="{{appRoot}}/racks"><h2>Racks</h2></a>
            <ul class="list-group">
                <li class="list-group-item">
                    <span class="badge">{{state.activeRacks}}</span>
                    <a href="{{appRoot}}/racks">Active Racks</a>
                </li>
                <li class="list-group-item">
                    <span class="badge">{{state.decommissioningRacks}}</span>
                    <a href="{{appRoot}}/racks">Decommissioning Racks</a>
                </li>
                <li class="list-group-item">
                    <span class="badge">{{state.deadRacks}}</span>
                    <a href="{{appRoot}}/racks">Dead Racks</a>
                </li>
            </ul>
        </div>
        <div class="col-md-4">
            <a href="{{appRoot}}/slaves"><h2>Slaves</h2></a>
            <ul class="list-group">
                <li class="list-group-item">
                    <span class="badge">{{state.activeSlaves}}</span>
                    <a href="{{appRoot}}/slaves">Active Slaves</a>
                </li>
                <li class="list-group-item">
                    <span class="badge">{{state.decommissioningSlaves}}</span>
                    <a href="{{appRoot}}/slaves">Decommissioning Slaves</a>
                </li>
                <li class="list-group-item">
                    <span class="badge">{{state.deadSlaves}}</span>
                    <a href="{{appRoot}}/slaves">Dead Slaves</a>
                </li>
                <li class="list-group-item">
                    <span class="badge">{{state.unknownSlaves}}</span>
                    <a href="{{appRoot}}/slaves">Unknown Slaves</a>
                </li>
            </ul>
        </div>
        <div class="col-md-4">
            <h2>Deploys</h2>
            <ul class="list-group">
                <li class="list-group-item">
                    <span class="badge">{{state.numDeploys}}</span>
                    Active deploys
                </li>
                <li class="list-group-item">
                    <span class="badge">{{timestampDuration state.oldestDeploy}}</span>
                    Time since last deploy
                </li>
            </ul>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="page-header">
                <h2>Hosts</h2>
            </div>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Hostname</th>
                        <th>Driver status</th>
                        <th class="hidden-xs">Uptime</th>
                        <th class="hidden-xs">Time since last offer</th>
                    </tr>
                </thead>
                <tbody>
                    {{#each state.hostStates}}
                        <tr>
                            <td>{{ hostname }}</td>
                            <td>{{humanizeText driverStatus }}</td>
                            <td data-value="{{ uptime }}" class="hidden-xs">
                                {{timestampDuration uptime}}
                            </td>
                            <td data-value="{{ millisSinceLastOffer }}" class="hidden-xs">
                                {{#if millisSinceLastOffer}}
                                    {{timestampDuration millisSinceLastOffer}}
                                {{else}}
                                    &mdash;
                                {{/if}}
                            </td>
                        </tr>
                    {{/each}}
                </tbody>
            </table>
        </div>
    </div>
{{else}}
    <div class="page-loader centered cushy"></div>
{{/if}}
